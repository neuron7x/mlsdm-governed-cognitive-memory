# Єдиний Реєстр Технічного Боргу (Unified Technical Debt Register)

**Версія документа:** 1.0.0
**Версія проекту:** 1.2.0
**Створено:** Грудень 2025
**Останнє оновлення:** Грудень 2025
**Статус:** Активний

---

## Зміст

1. [Огляд](#огляд)
2. [Методологія інвентаризації](#методологія-інвентаризації)
3. [Зведена статистика](#зведена-статистика)
4. [Реєстр технічного боргу](#реєстр-технічного-боргу)
   - [Критичний пріоритет](#критичний-пріоритет-0-елементів)
   - [Високий пріоритет](#високий-пріоритет-5-елементів)
   - [Середній пріоритет](#середній-пріоритет-13-елементів)
   - [Низький пріоритет](#низький-пріоритет-21-елементів)
5. [Телеметрія якості](#телеметрія-якості)
6. [Графік ревізій](#графік-ревізій)
7. [Зв'язані документи](#звязані-документи)

---

## Огляд

Цей документ є **єдиним джерелом істини** щодо всього виявленого технічного боргу в репозиторії MLSDM. Документ консолідує дані з:

- Аналізу коду (TODO/FIXME/XXX коментарі)
- Результатів статичного аналізу (ruff, mypy, deptry)
- Сканування вразливостей (pip-audit)
- Аналізу CI/CD конфігурації
- Оцінки архітектури
- Перевірки тестового покриття
- Аудиту документації
- Аналізу залежностей

### Критерії класифікації

| Критичність | Опис |
|-------------|------|
| **Критичний** | Блокує релізи, створює критичний ризик безпеки або стабільності |
| **Високий** | Впливає на надійність продукту, потребує вирішення в найближчому релізі |
| **Середній** | Погіршує підтримуваність, рекомендовано вирішити протягом кварталу |
| **Низький** | Покращення якості коду, може бути відкладено |

### Категорії

| Категорія | Опис |
|-----------|------|
| **Код** | Проблеми в основному коді (архітектура, дублювання, складність) |
| **Тести** | Проблеми тестування (покриття, flaky-тести, застарілі тести) |
| **CI/CD** | Проблеми безперервної інтеграції та доставки |
| **Інфраструктура** | Проблеми розгортання, контейнеризації, моніторингу |
| **Безпека** | Вразливості, небезпечні конфігурації, ризики |
| **Документація** | Неповна, застаріла або відсутня документація |
| **Залежності** | Проблеми із зовнішніми бібліотеками |

---

## Методологія інвентаризації

### Проведені перевірки

| Перевірка | Інструмент | Результат | Дата |
|-----------|------------|-----------|------|
| Лінтинг коду | `ruff check src/mlsdm` | ✅ 0 помилок | 2025-12-19 |
| Типізація | `mypy src/mlsdm` | ✅ 0 помилок | 2025-12-19 |
| Вразливості залежностей | `pip-audit` | ⚠️ 1 вразливість | 2025-12-19 |
| Аналіз залежностей | `deptry src/mlsdm` | ℹ️ Лише інформаційні | 2025-12-19 |
| Пошук TODO/FIXME/XXX | `grep -rn` | ℹ️ 0 в ядрі | 2025-12-19 |
| Збірка тестів | `pytest --collect-only` | ✅ 1917 тестів | 2025-12-19 |

---

## Зведена статистика

```
╔══════════════════════════════════════════════════════════════════════════════╗
║                        ЗВЕДЕНА СТАТИСТИКА ТЕХБОРГУ                           ║
╠═════════════════════╦═══════════╦═════════════════════════════════════════════╣
║ Категорія           ║ Кількість ║ Критичний / Високий / Середній / Низький   ║
╠═════════════════════╬═══════════╬═════════════════════════════════════════════╣
║ Безпека             ║     4     ║     0    /    2    /     1     /    1       ║
║ Архітектура/Код     ║     9     ║     0    /    0    /     4     /    5       ║
║ Тести               ║     5     ║     0    /    1    /     0     /    4       ║
║ CI/CD               ║     4     ║     0    /    0    /     1     /    3       ║
║ Документація        ║     5     ║     0    /    0    /     1     /    4       ║
║ Залежності          ║     5     ║     0    /    2    /     3     /    0       ║
║ Інфраструктура      ║     3     ║     0    /    0    /     3     /    0       ║
╠═════════════════════╬═══════════╬═════════════════════════════════════════════╣
║ ВСЬОГО              ║    35     ║     0    /    5    /    13     /   17       ║
╚═════════════════════╩═══════════╩═════════════════════════════════════════════╝

Статус готовності до продакшену: 92%
Покриття тестів: 78.13% (ціль: 75%) ✓
Помилки типізації (mypy): 0 ✓
Помилки лінтингу (ruff): 0 ✓
```

---

## Реєстр технічного боргу

### Критичний пріоритет (0 елементів)

**✅ Усі критичні проблеми вирішено.**

Раніше вирішені критичні проблеми:
- ~~HARD-001: Policy-as-code foundation~~ → ✅ Вирішено
- ~~HARD-002: Policy validator script~~ → ✅ Вирішено
- ~~HARD-003: SLO Validation Protocol~~ → ✅ Вирішено

---

### Високий пріоритет (5 елементів)

#### TD-001: Вразливість у pip (CVE-2025-8869)

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-001 |
| **Категорія** | Залежності / Безпека |
| **Критичність** | Високий |
| **Локація** | Системна залежність `pip==24.0` |
| **Опис** | Вразливість tarfile path traversal дозволяє перезапис файлів при встановленні шкідливих sdist пакетів |
| **Причина** | pip використовує tarfile без перевірки symbolic/hard link targets |
| **Вплив** | Потенційний компрометація цілісності системи при `pip install` з недовірених джерел |
| **Ризик** | Середній (використовуються лише довірені джерела) |
| **Власник** | @devops |
| **Рекомендоване виправлення** | Оновити pip до версії ≥25.3 |
| **Критерій закриття** | `pip --version` показує ≥25.3, pip-audit без вразливостей |
| **Докази** | `pip-audit --format json` виявив CVE-2025-8869 |

---

#### TD-002: Частково мітігований ризик R012 - Виявлення дрейфу політики

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-002 |
| **Категорія** | Безпека / Governance |
| **Критичність** | Високий |
| **Локація** | `src/mlsdm/core/moral_filter.py`, моніторинг |
| **Опис** | Відсутня автоматизована система виявлення дрейфу політики безпеки та моральних порогів |
| **Причина** | Система не має автоматичних алертів при зміні ефективних порогів безпеки |
| **Вплив** | Потенційне зниження рівня безпеки може залишитись непоміченим |
| **Ризик** | Високий |
| **Власник** | @safety-team |
| **Рекомендоване виправлення** | Імплементувати систему алертів дрейфу з метриками в Prometheus |
| **Критерій закриття** | Алерти налаштовані, тести верифікують виявлення дрейфу |
| **Докази** | `RISK_REGISTER.md` R012 статус "Partially Mitigated" |

---

#### TD-003: Частково мітігований ризик R015 - Розповсюдження галюцинацій

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-003 |
| **Категорія** | Безпека / AI Safety |
| **Критичність** | Високий |
| **Локація** | `src/mlsdm/memory/`, `src/mlsdm/core/llm_wrapper.py` |
| **Опис** | Відсутній механізм відстеження провенансу пам'яті для запобігання розповсюдженню галюцинацій LLM |
| **Причина** | Embedding'и зберігаються без метаданих джерела та оцінки достовірності |
| **Вплив** | Галюціновані відповіді можуть накопичуватись у пам'яті та впливати на майбутні відповіді |
| **Ризик** | Високий |
| **Власник** | @safety-team |
| **Рекомендоване виправлення** | Додати memory provenance metadata та confidence scoring |
| **Критерій закриття** | Кожен збережений embedding має source та confidence score |
| **Докази** | `RISK_REGISTER.md` R015 статус "Partially Mitigated" |

---

#### TD-004: Частковий хаос-тестінг

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-004 |
| **Категорія** | Тести |
| **Критичність** | Високий |
| **Локація** | `tests/chaos/` |
| **Опис** | Chaos engineering тести покривають лише 3 сценарії: memory pressure, slow LLM, network timeout |
| **Причина** | Обмежений час розробки, пріоритизація основних сценаріїв |
| **Вплив** | Недостатня впевненість у стійкості системи до різних типів відмов |
| **Ризик** | Середній |
| **Власник** | @engineering |
| **Рекомендоване виправлення** | Додати тести: disk I/O failure, CPU starvation, cascading failures |
| **Критерій закриття** | Мінімум 6 chaos сценаріїв з документованими результатами |
| **Докази** | `tests/chaos/` містить лише 3 тест-файли |

---

#### TD-005: numpy>=2.0.0 залежність обмежує сумісність

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-005 |
| **Категорія** | Залежності |
| **Критичність** | Високий |
| **Локація** | `pyproject.toml` |
| **Опис** | numpy 2.0 є major версією з breaking changes, що може обмежити сумісність з іншими бібліотеками |
| **Причина** | Оновлення до numpy 2.0 для нових функцій без оцінки впливу на екосистему |
| **Вплив** | Потенційні конфлікти залежностей при інтеграції з іншими бібліотеками |
| **Ризик** | Середній |
| **Власник** | @engineering |
| **Рекомендоване виправлення** | Оцінити можливість підтримки numpy>=1.26.0,<3.0.0 |
| **Критерій закриття** | Документоване рішення про версію numpy з обґрунтуванням |
| **Докази** | `pyproject.toml` line 40: `"numpy>=2.0.0"` |

---

### Середній пріоритет (13 елементів)

#### TD-006: Відсутність автоматичного rollback в release workflow

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-006 |
| **Категорія** | CI/CD |
| **Критичність** | Середній |
| **Локація** | `.github/workflows/release.yml` |
| **Опис** | Release workflow не має автоматичного rollback при невдалому deployment |
| **Причина** | Первинний фокус на базовому CI/CD pipeline |
| **Вплив** | Потенційний downtime при проблемному релізі |
| **Ризик** | Середній |
| **Власник** | @devops |
| **Рекомендоване виправлення** | Додати smoke tests після deployment та автоматичний rollback |
| **Критерій закриття** | Smoke tests запускаються post-deploy, rollback спрацьовує автоматично |
| **Докази** | `.github/workflows/release.yml` не містить rollback логіки |

---

#### TD-007: Відсутність формальної валідації API контрактів

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-007 |
| **Категорія** | Архітектура |
| **Критичність** | Середній |
| **Локація** | `src/mlsdm/api/` |
| **Опис** | FastAPI auto-generates OpenAPI spec, але немає формальної валідації контрактів між версіями |
| **Причина** | Покладання на FastAPI автогенерацію без додаткових перевірок |
| **Вплив** | Потенційні breaking changes можуть залишитись непоміченими |
| **Ризик** | Середній |
| **Власник** | @engineering |
| **Рекомендоване виправлення** | Інтегрувати OpenAPI diff в CI, імплементувати API versioning (v1, v2) |
| **Критерій закриття** | CI виявляє breaking changes, API має версіонування |
| **Докази** | `src/mlsdm/api/` не має версіонування в URL paths |

---

#### TD-008: Експериментальні модулі без чіткого lifecycle

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-008 |
| **Категорія** | Архітектура |
| **Критичність** | Середній |
| **Локація** | `src/mlsdm/memory/experimental/` |
| **Опис** | Експериментальні модулі мають послаблену типізацію та відсутній шлях до production-ready статусу |
| **Причина** | Модулі для дослідження/бенчмаркінгу без визначеного lifecycle |
| **Вплив** | Накопичення технічного боргу в експериментальному коді |
| **Ризик** | Низький |
| **Власник** | @engineering |
| **Рекомендоване виправлення** | Визначити критерії "промоушену" та встановити дедлайни для переоцінки |
| **Критерій закриття** | Документовані критерії переходу experimental → stable |
| **Докази** | `pyproject.toml` mypy overrides для experimental modules |

---

#### TD-009: Middleware typing проблеми з BaseHTTPMiddleware

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-009 |
| **Категорія** | Архітектура |
| **Критичність** | Середній |
| **Локація** | `src/mlsdm/api/middleware.py` |
| **Опис** | Middleware класи наслідують BaseHTTPMiddleware, яку mypy не може правильно типізувати |
| **Причина** | FastAPI/Starlette typing обмеження |
| **Вплив** | Обмежена підтримка типів, складніший рефакторинг |
| **Ризик** | Низький |
| **Власник** | @engineering |
| **Рекомендоване виправлення** | Міграція до Starlette middleware pure functions або документовані type: ignore |
| **Критерій закриття** | Middleware працює з повною типізацією або документованими виключеннями |
| **Докази** | mypy конфігурація в pyproject.toml для middleware |

---

#### TD-010: Конфігурація з множинних джерел без пріоритетів

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-010 |
| **Категорія** | Архітектура |
| **Критичність** | Середній |
| **Локація** | `config/`, `src/mlsdm/config/` |
| **Опис** | Конфігурація може надходити з: env vars, YAML файлів, Python dataclasses, CLI - без чіткої ієрархії пріоритетів |
| **Причина** | Еволюційний розвиток конфігураційного шару |
| **Вплив** | Складність у дебагінгу конфігураційних проблем |
| **Ризик** | Низький |
| **Власник** | @engineering |
| **Рекомендоване виправлення** | Документувати ієрархію пріоритетів, додати `mlsdm config --show-effective` |
| **Критерій закриття** | Документована ієрархія, CLI показує ефективну конфігурацію |
| **Докази** | `config/` містить декілька YAML файлів, env.*.example файли |

---

#### TD-011: Optional torch залежність без чітких помилок

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-011 |
| **Категорія** | Залежності |
| **Критичність** | Середній |
| **Локація** | `src/mlsdm/extensions/neuro_lang_extension.py` |
| **Опис** | PyTorch є optional залежністю, але відсутність може викликати незрозумілі помилки при спробі використати NeuroLang |
| **Причина** | Torch зроблено optional для зменшення розміру інсталяції |
| **Вплив** | Неочевидні помилки для користувачів |
| **Ризик** | Низький |
| **Власник** | @engineering |
| **Рекомендоване виправлення** | Додати документацію про torch вимогу, покращити повідомлення про помилку |
| **Критерій закриття** | Зрозумілі помилки при відсутньому torch |
| **Докази** | `pyproject.toml` optional-dependencies neurolang |

---

#### TD-012: Немає pin для транзитивних залежностей

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-012 |
| **Категорія** | Залежності |
| **Критичність** | Середній |
| **Локація** | `requirements.txt` |
| **Опис** | Прямі залежності закріплені, але транзитивні можуть змінюватись |
| **Причина** | Використання requirements.txt без pip-compile |
| **Вплив** | Непередбачувані зміни в залежностях при переінсталяції |
| **Ризик** | Середній |
| **Власник** | @devops |
| **Рекомендоване виправлення** | Використати pip-compile для генерації locked requirements |
| **Критерій закриття** | requirements.txt згенеровано pip-compile, всі версії закріплені |
| **Докази** | `requirements.txt` не містить транзитивних залежностей |

---

#### TD-013: Відсутність локалізації документації

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-013 |
| **Категорія** | Документація |
| **Критичність** | Середній |
| **Локація** | `docs/`, `*.md` |
| **Опис** | Вся документація лише англійською |
| **Причина** | Фокус на основній розробці |
| **Вплив** | Обмежена доступність для не-англомовних користувачів |
| **Ризик** | Низький |
| **Власник** | @docs-team |
| **Рекомендоване виправлення** | Локалізувати ключові документи або задокументувати рішення залишити лише англійську |
| **Критерій закриття** | Документоване рішення про локалізацію |
| **Докази** | Всі .md файли англійською |

---

#### TD-014: Canary deployment без автоматичного аналізу

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-014 |
| **Категорія** | Інфраструктура |
| **Критичність** | Середній |
| **Локація** | `deploy/k8s/canary-deployment.yaml` |
| **Опис** | Canary deployment налаштований, але без автоматичного аналізу метрик |
| **Причина** | Базова імплементація canary без analysis step |
| **Вплив** | Ручний аналіз canary результатів |
| **Ризик** | Середній |
| **Власник** | @devops |
| **Рекомендоване виправлення** | Додати автоматичний аналіз метрик та прийняття рішень |
| **Критерій закриття** | Canary автоматично просувається або відкочується |
| **Докази** | `deploy/k8s/canary-deployment.yaml` |

---

#### TD-015: Немає автоматизації CHANGELOG

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-015 |
| **Категорія** | Інфраструктура |
| **Критичність** | Середній |
| **Локація** | `CHANGELOG.md` |
| **Опис** | CHANGELOG оновлюється вручну між релізами |
| **Причина** | Не налаштовано conventional-changelog |
| **Вплив** | Ризик пропущених змін у release notes |
| **Ризик** | Низький |
| **Власник** | @engineering |
| **Рекомендоване виправлення** | Додати conventional-changelog-cli для автоматичної генерації |
| **Критерій закриття** | CHANGELOG генерується автоматично з commit messages |
| **Докази** | `CHANGELOG.md` оновлено вручну |

---

#### TD-016: SLO dashboards без error budget automation

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-016 |
| **Категорія** | Інфраструктура |
| **Критичність** | Середній |
| **Локація** | `deploy/grafana/` |
| **Опис** | SLO dashboards налаштовані, але error budget tracking потребує ручного налаштування |
| **Причина** | Фокус на базових метриках |
| **Вплив** | Відсутній автоматичний error budget exhaustion alerting |
| **Ризик** | Середній |
| **Власник** | @devops |
| **Рекомендоване виправлення** | Додати error budget burn rate alerts |
| **Критерій закриття** | Автоматичні алерти при швидкому вичерпанні error budget |
| **Докази** | `deploy/grafana/mlsdm_slo_dashboard.json` |

---

#### TD-017: stub dependency versions не закріплені

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-017 |
| **Категорія** | Залежності |
| **Критичність** | Середній |
| **Локація** | `pyproject.toml` |
| **Опис** | types-PyYAML та types-requests версії не закріплені |
| **Причина** | Використання мінімальних версійних обмежень |
| **Вплив** | Потенційні несумісності з оновленнями stubs |
| **Ризик** | Низький |
| **Власник** | @engineering |
| **Рекомендоване виправлення** | Закріпити версії type stubs для сумісності з основними пакетами |
| **Критерій закриття** | Type stubs мають конкретні версії в pyproject.toml |
| **Докази** | `pyproject.toml` line 73-74 |

---

#### TD-018: Matrix testing без Python 3.12

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-018 |
| **Категорія** | CI/CD |
| **Критичність** | Середній |
| **Локація** | `.github/workflows/ci-neuro-cognitive-engine.yml` |
| **Опис** | Тести запускаються на Python 3.10 та 3.11, але 3.12 також підтримується |
| **Причина** | Matrix не оновлено після додавання 3.12 підтримки |
| **Вплив** | Відсутня верифікація для Python 3.12 користувачів |
| **Ризик** | Низький |
| **Власник** | @devops |
| **Рекомендоване виправлення** | Додати Python 3.12 до matrix |
| **Критерій закриття** | CI matrix включає 3.10, 3.11, 3.12 |
| **Докази** | `.github/workflows/ci-neuro-cognitive-engine.yml` line 89-90 |

---

### Низький пріоритет (17 елементів)

#### TD-019: Дублювання retry логіки

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-019 |
| **Категорія** | Код |
| **Критичність** | Низький |
| **Локація** | `src/mlsdm/utils/data_serializer.py`, `src/mlsdm/state/system_state_store.py` |
| **Опис** | `@retry(stop=stop_after_attempt(3))` використовується в декількох місцях без централізованої конфігурації |
| **Причина** | Окрема імплементація в кожному модулі |
| **Вплив** | Неконсистентне налаштування retry |
| **Ризик** | Низький |
| **Власник** | @engineering |
| **Рекомендоване виправлення** | Створити централізований retry decorator з конфігурацією |
| **Критерій закриття** | Єдиний retry decorator використовується всюди |
| **Докази** | `grep -n "stop_after_attempt" src/mlsdm/` |

---

#### TD-020: Magic numbers у коді

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-020 |
| **Категорія** | Код |
| **Критичність** | Низький |
| **Локація** | `src/mlsdm/adapters/openai_adapter.py:71`, `src/mlsdm/adapters/llm_provider.py:171` |
| **Опис** | Деякі константи (temperature=0.7) захардкоджені без іменованих констант |
| **Причина** | Швидка імплементація |
| **Вплив** | Важче змінювати та розуміти значення |
| **Ризик** | Дуже низький |
| **Власник** | @engineering |
| **Рекомендоване виправлення** | Винести до конфігураційних параметрів або іменованих констант |
| **Критерій закриття** | Всі значущі числа мають константи |
| **Докази** | `grep "temperature=0.7" src/mlsdm/` |

---

#### TD-021: Temp files без централізованого cleanup

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-021 |
| **Категорія** | Код |
| **Критичність** | Низький |
| **Локація** | `src/mlsdm/state/system_state_store.py` |
| **Опис** | Тимчасові файли створюються з суфіксом `.tmp`, але логіка cleanup розкидана по коду |
| **Причина** | Ручне управління temp файлами |
| **Вплив** | Потенційні залишкові temp файли |
| **Ризик** | Низький |
| **Власник** | @engineering |
| **Рекомендоване виправлення** | Використати `tempfile` модуль з context managers |
| **Критерій закриття** | Всі temp files використовують tempfile context managers |
| **Докази** | `system_state_store.py` line 110, 192 |

---

#### TD-022: Немає dependency injection framework

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-022 |
| **Категорія** | Код |
| **Критичність** | Низький |
| **Локація** | Загальна архітектура |
| **Опис** | Залежності передаються вручну через конструктори |
| **Причина** | Простий підхід без фреймворку |
| **Вплив** | Складніше тестування та зміна залежностей |
| **Ризик** | Низький |
| **Власник** | @engineering |
| **Рекомендоване виправлення** | Розглянути DI (FastAPI Depends частково використовується) |
| **Критерій закриття** | Документоване рішення про DI стратегію |
| **Докази** | Аналіз коду |

---

#### TD-023: Debug логування з f-strings замість structured logging

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-023 |
| **Категорія** | Код |
| **Критичність** | Низький |
| **Локація** | Різні модулі |
| **Опис** | Деякі debug logs використовують f-strings замість structured logging параметрів |
| **Причина** | Змішаний стиль логування |
| **Вплив** | Менш ефективне парсингу логів |
| **Ризик** | Дуже низький |
| **Власник** | @engineering |
| **Рекомендоване виправлення** | Мігрувати до structured logging з параметрами |
| **Критерій закриття** | Всі логи використовують structured формат |
| **Докази** | `grep "logger.debug" src/mlsdm/` |

---

#### TD-024: Деселектовані/пропущені тести

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-024 |
| **Категорія** | Тести |
| **Критичність** | Низький |
| **Локація** | `tests/` |
| **Опис** | 6 тестів деселектовано, 12 пропущено - можливо застарілі тести |
| **Причина** | Історичні зміни в коді |
| **Вплив** | Потенційно нетестована функціональність |
| **Ризик** | Низький |
| **Власник** | @engineering |
| **Рекомендоване виправлення** | Переглянути та видалити/оновити застарілі тести |
| **Критерій закриття** | Всі пропущені тести мають документовану причину |
| **Докази** | `COVERAGE_REPORT_2025.md` |

---

#### TD-025: Відсутність fuzz testing

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-025 |
| **Категорія** | Тести |
| **Критичність** | Низький |
| **Локація** | `tests/` |
| **Опис** | Проект використовує property-based testing (hypothesis), але не має fuzz testing |
| **Причина** | Не пріоритизовано |
| **Вплив** | Потенційно невиявлені edge cases |
| **Ризик** | Низький |
| **Власник** | @security |
| **Рекомендоване виправлення** | Розглянути atheris або python-afl для fuzzing |
| **Критерій закриття** | Документоване рішення про fuzzing стратегію |
| **Докази** | Аналіз `tests/` директорії |

---

#### TD-026: Відсутність snapshot testing

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-026 |
| **Категорія** | Тести |
| **Критичність** | Низький |
| **Локація** | `tests/` |
| **Опис** | Відсутнє snapshot testing для API responses |
| **Причина** | Не імплементовано |
| **Вплив** | Складніше виявлення regression в API responses |
| **Ризик** | Низький |
| **Власник** | @engineering |
| **Рекомендоване виправлення** | Додати syrupy для snapshot testing API responses |
| **Критерій закриття** | API тести мають snapshot assertions |
| **Докази** | `tests/api/` не використовує snapshot testing |

---

#### TD-027: LLM mocking не централізований

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-027 |
| **Категорія** | Тести |
| **Критичність** | Низький |
| **Локація** | `tests/` |
| **Опис** | LLM mocks створюються в кожному тесті окремо |
| **Причина** | Органічний ріст тестової бази |
| **Вплив** | Дублювання коду в тестах |
| **Ризик** | Дуже низький |
| **Власник** | @engineering |
| **Рекомендоване виправлення** | Створити централізовані fixtures для LLM mocks |
| **Критерій закриття** | LLM mock fixtures в conftest.py |
| **Докази** | Аналіз тестових файлів |

---

#### TD-028: Дублювання workflow steps

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-028 |
| **Категорія** | CI/CD |
| **Критичність** | Низький |
| **Локація** | `.github/workflows/` |
| **Опис** | Деякі кроки (checkout, setup-python, install deps) дублюються між workflows |
| **Причина** | Органічний ріст CI/CD |
| **Вплив** | Більший обсяг коду для підтримки |
| **Ризик** | Дуже низький |
| **Власник** | @devops |
| **Рекомендоване виправлення** | Використати composite actions для спільних кроків |
| **Критерій закриття** | Composite action для стандартного setup |
| **Докази** | Аналіз `.github/workflows/` |

---

#### TD-029: pip cache не у всіх workflows

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-029 |
| **Категорія** | CI/CD |
| **Критичність** | Низький |
| **Локація** | `.github/workflows/` |
| **Опис** | pip dependency caching не використовується у всіх workflows |
| **Причина** | Неповне налаштування caching |
| **Вплив** | Повільніші CI builds |
| **Ризик** | Дуже низький |
| **Власник** | @devops |
| **Рекомендоване виправлення** | Додати actions/cache для pip у всіх workflows |
| **Критерій закриття** | Всі workflows використовують pip caching |
| **Докази** | Аналіз workflows |

---

#### TD-030: Відсутні docstrings в деяких модулях

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-030 |
| **Категорія** | Документація |
| **Критичність** | Низький |
| **Локація** | Різні модулі в `src/mlsdm/` |
| **Опис** | Деякі функції/класи не мають docstrings |
| **Причина** | Не всі модулі повністю задокументовані |
| **Вплив** | Складніше розуміння коду |
| **Ризик** | Низький |
| **Власник** | @engineering |
| **Рекомендоване виправлення** | Додати interrogate до CI для перевірки docstring coverage |
| **Критерій закриття** | interrogate в CI з мінімальним threshold |
| **Докази** | Аналіз коду |

---

#### TD-031: Examples не тестуються автоматично

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-031 |
| **Категорія** | Документація |
| **Критичність** | Низький |
| **Локація** | `examples/` |
| **Опис** | Examples не тестуються автоматично і можуть застаріти |
| **Причина** | Не налаштовано pytest-examples |
| **Вплив** | Приклади можуть не працювати |
| **Ризик** | Низький |
| **Власник** | @docs-team |
| **Рекомендоване виправлення** | Додати pytest-examples для тестування прикладів |
| **Критерій закриття** | Examples тестуються в CI |
| **Докази** | `examples/` не включено в CI тести |

---

#### TD-032: README дублює інформацію з docs/

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-032 |
| **Категорія** | Документація |
| **Критичність** | Низький |
| **Локація** | `README.md`, `docs/` |
| **Опис** | Деяка інформація дублюється між README та docs |
| **Причина** | Незалежний розвиток документації |
| **Вплив** | Ризик неконсистентності |
| **Ризик** | Дуже низький |
| **Власник** | @docs-team |
| **Рекомендоване виправлення** | Використати includes для уникнення дублювання |
| **Критерій закриття** | README посилається на docs замість дублювання |
| **Докази** | Порівняння README.md та docs/ |

---

#### TD-033: Версії type stubs не закріплені

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-033 |
| **Категорія** | Залежності |
| **Критичність** | Низький |
| **Локація** | `pyproject.toml` |
| **Опис** | types-PyYAML та types-requests мають мінімальні версії без upper bounds |
| **Причина** | Стандартний підхід до залежностей |
| **Вплив** | Потенційні несумісності |
| **Ризик** | Дуже низький |
| **Власник** | @engineering |
| **Рекомендоване виправлення** | Закріпити версії сумісні з основними пакетами |
| **Критерій закриття** | Type stubs мають pin версії |
| **Докази** | `pyproject.toml` |

---

#### TD-034: Немає ADR для всіх архітектурних рішень

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-034 |
| **Категорія** | Документація |
| **Критичність** | Низький |
| **Локація** | `docs/adr/` |
| **Опис** | Не всі значущі архітектурні рішення задокументовані як ADR |
| **Причина** | ADR процес нещодавно впроваджений |
| **Вплив** | Втрата контексту архітектурних рішень |
| **Ризик** | Низький |
| **Власник** | @engineering |
| **Рекомендоване виправлення** | Ретроспективно документувати ключові рішення |
| **Критерій закриття** | 10+ ADR задокументовано |
| **Докази** | `docs/adr/` містить 5 ADR |

---

#### TD-035: Security scan (Bandit) результати не архівуються

| Поле | Значення |
|------|----------|
| **Ідентифікатор** | TD-035 |
| **Категорія** | Безпека |
| **Критичність** | Низький |
| **Локація** | `.github/workflows/sast-scan.yml` |
| **Опис** | SAST результати завантажуються в GitHub Security tab, але не архівуються окремо |
| **Причина** | Покладання на GitHub Security features |
| **Вплив** | Відсутня історія поза GitHub |
| **Ризик** | Дуже низький |
| **Власник** | @security |
| **Рекомендоване виправлення** | Архівувати SARIF файли як artifacts |
| **Критерій закриття** | SARIF файли зберігаються як workflow artifacts |
| **Докази** | `.github/workflows/sast-scan.yml` |

---

## Телеметрія якості

### Поточний стан (2025-12-19)

| Метрика | Значення | Ціль | Статус |
|---------|----------|------|--------|
| Помилки лінтингу (ruff) | 0 | 0 | ✅ |
| Помилки типізації (mypy) | 0 | 0 | ✅ |
| Покриття тестів | 78.13% | 75% | ✅ |
| Вразливості (pip-audit) | 1 (pip) | 0 | ⚠️ |
| Кількість тестів | 1917 | - | ✅ |
| Пропущені тести | 12 | <5% | ✅ |
| Критичні проблеми | 0 | 0 | ✅ |
| Високий пріоритет | 5 | <3 | ⚠️ |

### Flaky тести

На основі CI аналізу, flaky тести не виявлено. Chaos tests налаштовані з `continue-on-error: true` для дослідницьких цілей.

### Повільні тести

Тести позначені `@pytest.mark.slow` для опціонального виключення. CI виключає slow тести з основних перевірок.

---

## Графік ревізій

| Тип ревізії | Частота | Наступна дата | Відповідальний |
|-------------|---------|---------------|----------------|
| Повна ревізія реєстру | Квартально | Березень 2026 | @engineering |
| Критичні проблеми | Щомісяця | Січень 2026 | @tech-lead |
| Вразливості безпеки | Щотижня | 2025-12-26 | @security |
| Post-incident оновлення | За потреби | - | Власник інциденту |

---

## Зв'язані документи

- [ENGINEERING_DEFICIENCIES_REGISTER.md](ENGINEERING_DEFICIENCIES_REGISTER.md) — Детальний реєстр інженерних дефіцитів
- [RISK_REGISTER.md](RISK_REGISTER.md) — Реєстр ризиків AI Safety
- [debt_ledger.md](debt_ledger.md) — Історія вирішених проблем
- [PROD_GAPS.md](PROD_GAPS.md) — Production readiness gaps
- [HARDENING_2025Q4_SUMMARY.md](HARDENING_2025Q4_SUMMARY.md) — Підсумок Q4 hardening
- [THREAT_MODEL.md](THREAT_MODEL.md) — Модель загроз
- [SECURITY_POLICY.md](SECURITY_POLICY.md) — Політика безпеки

---

**Документ створено:** Грудень 2025
**Останнє оновлення:** Грудень 2025
**Автор:** Technical Debt Assessment Agent
**Статус:** Активний
