{
  "openapi": "3.1.0",
  "info": {
    "title": "mlsdm-governed-cognitive-memory",
    "description": "Production-ready neurobiologically-grounded cognitive architecture",
    "version": "1.0.0",
    "x-logo": {
      "url": "https://github.com/neuron7x/mlsdm/raw/main/docs/logo.png"
    }
  },
  "paths": {
    "/health": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": "Health Check",
        "description": "Simple health check endpoint.\n\nReturns basic health status without detailed information.\nThis is the primary endpoint for simple health checks.\n\nReturns:\n    SimpleHealthStatus with status=\"healthy\" if service is responsive.",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SimpleHealthStatus"
                }
              }
            }
          }
        }
      }
    },
    "/health/liveness": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": "Liveness",
        "description": "Liveness probe endpoint (legacy).\n\nIndicates whether the process is alive and running.\nAlways returns 200 if the process is responsive.\n\nNote: For Kubernetes, prefer /health/live endpoint.\n\nReturns:\n    HealthStatus with 200 status code",
        "operationId": "liveness_health_liveness_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthStatus"
                }
              }
            }
          }
        }
      }
    },
    "/health/live": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": "Live",
        "description": "Liveness probe endpoint.\n\nReturns 200 if the process is alive - no dependency checks.\nUse this for Kubernetes liveness probes.\n\nReturns:\n    LivenessStatus with 200 status code",
        "operationId": "live_health_live_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LivenessStatus"
                }
              }
            }
          }
        }
      }
    },
    "/health/ready": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": "Ready",
        "description": "Readiness probe endpoint with aggregated component health.\n\nChecks:\n- cognitive_controller: not in emergency_shutdown\n- memory_bounds: global memory usage within limit\n- moral_filter: initialized without critical errors\n- system_resources: CPU and memory available\n\nReturns 200 if all critical components healthy, 503 otherwise.\n\nArgs:\n    response: FastAPI response object to set status code\n\nReturns:\n    ReadinessStatus with status, components, and details",
        "operationId": "ready_health_ready_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReadinessStatus"
                }
              }
            }
          }
        }
      }
    },
    "/health/readiness": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": "Readiness",
        "description": "Readiness probe endpoint (legacy alias for /health/ready).\n\nDEPRECATED: This endpoint is maintained for backward compatibility only.\nUse /health/ready instead.\n\nThis endpoint is a true alias of /health/ready and returns identical\nstatus codes and JSON structure. Both endpoints share the same readiness\nlogic to ensure consistent behavior for all consumers.\n\nIndicates whether the system can accept traffic.\nReturns 200 if ready, 503 if not ready.\n\nArgs:\n    response: FastAPI response object to set status code\n\nReturns:\n    ReadinessStatus with appropriate status code (identical to /health/ready)",
        "operationId": "readiness_health_readiness_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReadinessStatus"
                }
              }
            }
          }
        }
      }
    },
    "/health/detailed": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": "Detailed Health",
        "description": "Detailed health status endpoint.\n\nProvides comprehensive system status including:\n- Memory state (L1, L2, L3 norms)\n- Current cognitive phase\n- System statistics\n- Resource usage\n\nReturns 200 if healthy, 503 if unhealthy.\n\nArgs:\n    response: FastAPI response object to set status code\n\nReturns:\n    DetailedHealthStatus with appropriate status code",
        "operationId": "detailed_health_health_detailed_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DetailedHealthStatus"
                }
              }
            }
          }
        }
      }
    },
    "/health/metrics": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": "Metrics",
        "description": "Prometheus metrics endpoint.\n\nExports metrics in Prometheus text format for scraping.\n\nReturns:\n    Prometheus-formatted metrics as plain text",
        "operationId": "metrics_health_metrics_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/generate": {
      "post": {
        "tags": [
          "Generation"
        ],
        "summary": "Generate",
        "description": "Generate a response using the NeuroCognitiveEngine.\n\nThis endpoint processes the input prompt through the complete cognitive pipeline,\nincluding moral filtering, memory retrieval, and rhythm management.\n\nArgs:\n    request_body: Generation request parameters.\n    request: FastAPI request object.\n\nReturns:\n    Generated response with core fields (response, phase, accepted)\n    plus optional metrics, safety_flags, and memory_stats.\n\nRaises:\n    HTTPException: 400 for invalid input, 429 for rate limit, 500 for internal error.",
        "operationId": "generate_generate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GenerateRequest"
              },
              "examples": {
                "simple": {
                  "summary": "Simple prompt",
                  "value": {
                    "prompt": "Explain quantum computing in simple terms",
                    "max_tokens": 256,
                    "moral_value": 0.8
                  }
                },
                "creative": {
                  "summary": "Creative writing",
                  "value": {
                    "prompt": "Write a short poem about artificial intelligence",
                    "max_tokens": 512,
                    "moral_value": 0.9
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenerateResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid input",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/infer": {
      "post": {
        "tags": [
          "Inference"
        ],
        "summary": "Infer",
        "description": "Generate a response with extended governance options.\n\nThis endpoint provides fine-grained control over the cognitive pipeline,\nincluding secure mode, aphasia detection/repair, and RAG retrieval.\n\nFeatures:\n- **secure_mode**: Enhanced filtering for sensitive/security-critical contexts\n- **aphasia_mode**: Detection and repair of telegraphic/fragmented speech patterns\n- **rag_enabled**: Context retrieval from cognitive memory for coherent responses\n\nArgs:\n    request_body: Inference request parameters with governance options.\n    request: FastAPI request object.\n\nReturns:\n    InferResponse with response text and detailed governance metadata.",
        "operationId": "infer_infer_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InferRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InferResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid input",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/status": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Get Status",
        "description": "Get extended service status with system info.\n\nReturns system status including version, backend, memory usage,\nand configuration info.",
        "operationId": "get_status_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Get Status Status Get"
                }
              }
            }
          }
        }
      }
    },
    "/v1/process_event/": {
      "post": {
        "summary": "Process Event",
        "description": "Process event with comprehensive security validation.\n\nImplements rate limiting, input validation, and audit logging\nas specified in SECURITY_POLICY.md.",
        "operationId": "process_event_v1_process_event__post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EventInput"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/v1/state/": {
      "get": {
        "summary": "Get State",
        "description": "Get system state with rate limiting.",
        "operationId": "get_state_v1_state__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StateResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/v1/generate": {
      "post": {
        "tags": [
          "Generation"
        ],
        "summary": "Generate",
        "description": "Generate a response using the NeuroCognitiveEngine.\n\nThis endpoint processes the input prompt through the complete cognitive pipeline,\nincluding moral filtering, memory retrieval, and rhythm management.\n\nArgs:\n    request_body: Generation request parameters.\n    request: FastAPI request object.\n\nReturns:\n    Generated response with core fields (response, phase, accepted)\n    plus optional metrics, safety_flags, and memory_stats.\n\nRaises:\n    HTTPException: 400 for invalid input, 429 for rate limit, 500 for internal error.",
        "operationId": "generate_v1_generate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GenerateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenerateResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid input",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/v1/infer": {
      "post": {
        "tags": [
          "Inference"
        ],
        "summary": "Infer",
        "description": "Generate a response with extended governance options.\n\nThis endpoint provides fine-grained control over the cognitive pipeline,\nincluding secure mode, aphasia detection/repair, and RAG retrieval.\n\nFeatures:\n- **secure_mode**: Enhanced filtering for sensitive/security-critical contexts\n- **aphasia_mode**: Detection and repair of telegraphic/fragmented speech patterns\n- **rag_enabled**: Context retrieval from cognitive memory for coherent responses\n\nArgs:\n    request_body: Inference request parameters with governance options.\n    request: FastAPI request object.\n\nReturns:\n    InferResponse with response text and detailed governance metadata.",
        "operationId": "infer_v1_infer_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InferRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InferResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid input",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/status": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Get Status",
        "description": "Get extended service status with system info.\n\nReturns system status including version, backend, memory usage,\nand configuration info.",
        "operationId": "get_status_v1_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Get Status V1 Status Get"
                }
              }
            }
          }
        }
      }
    },
    "/v2/process_event/": {
      "post": {
        "summary": "Process Event",
        "description": "Process event with comprehensive security validation.\n\nImplements rate limiting, input validation, and audit logging\nas specified in SECURITY_POLICY.md.",
        "operationId": "process_event_v2_process_event__post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EventInput"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/v2/state/": {
      "get": {
        "summary": "Get State",
        "description": "Get system state with rate limiting.",
        "operationId": "get_state_v2_state__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StateResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/v2/generate": {
      "post": {
        "tags": [
          "Generation"
        ],
        "summary": "Generate",
        "description": "Generate a response using the NeuroCognitiveEngine.\n\nThis endpoint processes the input prompt through the complete cognitive pipeline,\nincluding moral filtering, memory retrieval, and rhythm management.\n\nArgs:\n    request_body: Generation request parameters.\n    request: FastAPI request object.\n\nReturns:\n    Generated response with core fields (response, phase, accepted)\n    plus optional metrics, safety_flags, and memory_stats.\n\nRaises:\n    HTTPException: 400 for invalid input, 429 for rate limit, 500 for internal error.",
        "operationId": "generate_v2_generate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GenerateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenerateResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid input",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/v2/infer": {
      "post": {
        "tags": [
          "Inference"
        ],
        "summary": "Infer",
        "description": "Generate a response with extended governance options.\n\nThis endpoint provides fine-grained control over the cognitive pipeline,\nincluding secure mode, aphasia detection/repair, and RAG retrieval.\n\nFeatures:\n- **secure_mode**: Enhanced filtering for sensitive/security-critical contexts\n- **aphasia_mode**: Detection and repair of telegraphic/fragmented speech patterns\n- **rag_enabled**: Context retrieval from cognitive memory for coherent responses\n\nArgs:\n    request_body: Inference request parameters with governance options.\n    request: FastAPI request object.\n\nReturns:\n    InferResponse with response text and detailed governance metadata.",
        "operationId": "infer_v2_infer_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InferRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InferResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid input",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v2/status": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Get Status",
        "description": "Get extended service status with system info.\n\nReturns system status including version, backend, memory usage,\nand configuration info.",
        "operationId": "get_status_v2_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Get Status V2 Status Get"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AphasiaMetadata": {
        "properties": {
          "enabled": {
            "type": "boolean",
            "title": "Enabled",
            "description": "Whether aphasia mode was enabled for this request"
          },
          "detected": {
            "type": "boolean",
            "title": "Detected",
            "description": "Whether aphasic patterns were detected",
            "default": false
          },
          "severity": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Severity",
            "description": "Severity score if detected (0.0 = none, 1.0 = severe)",
            "default": 0.0
          },
          "repaired": {
            "type": "boolean",
            "title": "Repaired",
            "description": "Whether repairs were applied",
            "default": false
          },
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note",
            "description": "Optional note about the aphasia processing"
          }
        },
        "type": "object",
        "required": [
          "enabled"
        ],
        "title": "AphasiaMetadata",
        "description": "Aphasia metadata for API responses (/infer endpoint).\n\nThis model provides a standardized structure for aphasia-related information\nin API responses, including detection status and repair information.\n\nAttributes:\n    enabled: Whether aphasia mode was enabled for this request.\n    detected: Whether aphasic patterns were detected.\n    severity: Severity score if detected (0.0 = none, 1.0 = severe).\n    repaired: Whether repairs were applied.\n    note: Optional note about the aphasia processing.\n\nExample:\n    >>> meta = AphasiaMetadata(\n    ...     enabled=True,\n    ...     detected=True,\n    ...     severity=0.4,\n    ...     repaired=True\n    ... )"
      },
      "CognitiveStateDTO": {
        "properties": {
          "phase": {
            "type": "string",
            "title": "Phase",
            "description": "Current cognitive phase (wake/sleep)"
          },
          "stateless_mode": {
            "type": "boolean",
            "title": "Stateless Mode",
            "description": "Whether running in stateless/degraded mode"
          },
          "emergency_shutdown": {
            "type": "boolean",
            "title": "Emergency Shutdown",
            "description": "Whether emergency shutdown is active"
          },
          "memory_used_mb": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Memory Used Mb",
            "description": "Aggregated memory usage in MB"
          },
          "moral_threshold": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Moral Threshold",
            "description": "Current moral filter threshold (0.0-1.0)"
          }
        },
        "type": "object",
        "required": [
          "phase",
          "stateless_mode",
          "emergency_shutdown"
        ],
        "title": "CognitiveStateDTO",
        "description": "Cognitive state snapshot for API responses.\n\nCONTRACT: These fields are part of the stable API contract.\nDo not modify without a major version bump."
      },
      "ComponentStatus": {
        "properties": {
          "healthy": {
            "type": "boolean",
            "title": "Healthy",
            "description": "Whether component is healthy"
          },
          "details": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Details",
            "description": "Optional details about status"
          }
        },
        "type": "object",
        "required": [
          "healthy"
        ],
        "title": "ComponentStatus",
        "description": "Status of a single component for readiness check."
      },
      "DetailedHealthStatus": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status"
          },
          "timestamp": {
            "type": "number",
            "title": "Timestamp"
          },
          "uptime_seconds": {
            "type": "number",
            "title": "Uptime Seconds"
          },
          "system": {
            "additionalProperties": true,
            "type": "object",
            "title": "System"
          },
          "memory_state": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Memory State"
          },
          "phase": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Phase"
          },
          "statistics": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Statistics"
          }
        },
        "type": "object",
        "required": [
          "status",
          "timestamp",
          "uptime_seconds",
          "system",
          "memory_state",
          "phase",
          "statistics"
        ],
        "title": "DetailedHealthStatus",
        "description": "Detailed health status response."
      },
      "ErrorDetail": {
        "properties": {
          "error_type": {
            "type": "string",
            "title": "Error Type",
            "description": "Type of error"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable error message"
          },
          "details": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Details",
            "description": "Additional error details"
          }
        },
        "type": "object",
        "required": [
          "error_type",
          "message"
        ],
        "title": "ErrorDetail",
        "description": "Structured error detail."
      },
      "ErrorResponse": {
        "properties": {
          "error": {
            "$ref": "#/components/schemas/ErrorDetail"
          }
        },
        "type": "object",
        "required": [
          "error"
        ],
        "title": "ErrorResponse",
        "description": "Structured error response."
      },
      "EventInput": {
        "properties": {
          "event_vector": {
            "items": {
              "type": "number"
            },
            "type": "array",
            "title": "Event Vector"
          },
          "moral_value": {
            "type": "number",
            "title": "Moral Value"
          }
        },
        "type": "object",
        "required": [
          "event_vector",
          "moral_value"
        ],
        "title": "EventInput"
      },
      "GenerateRequest": {
        "properties": {
          "prompt": {
            "type": "string",
            "minLength": 1,
            "title": "Prompt",
            "description": "Input text prompt to process"
          },
          "max_tokens": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 4096.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Tokens",
            "description": "Maximum number of tokens to generate"
          },
          "moral_value": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Moral Value",
            "description": "Moral threshold value"
          }
        },
        "type": "object",
        "required": [
          "prompt"
        ],
        "title": "GenerateRequest",
        "description": "Request model for generate endpoint."
      },
      "GenerateResponse": {
        "properties": {
          "response": {
            "type": "string",
            "title": "Response",
            "description": "Generated response text"
          },
          "accepted": {
            "type": "boolean",
            "title": "Accepted",
            "description": "Whether the request was morally accepted"
          },
          "phase": {
            "type": "string",
            "title": "Phase",
            "description": "Current cognitive phase"
          },
          "moral_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Moral Score",
            "description": "Moral score used for this request"
          },
          "aphasia_flags": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Aphasia Flags",
            "description": "Aphasia detection flags (if available)"
          },
          "emergency_shutdown": {
            "type": "boolean",
            "title": "Emergency Shutdown",
            "description": "Whether system is in emergency shutdown state",
            "default": false
          },
          "cognitive_state": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CognitiveStateDTO"
              },
              {
                "type": "null"
              }
            ],
            "description": "Aggregated cognitive state snapshot (stable fields only)"
          },
          "metrics": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metrics",
            "description": "Performance timing metrics"
          },
          "safety_flags": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Safety Flags",
            "description": "Safety validation results"
          },
          "memory_stats": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Memory Stats",
            "description": "Memory state statistics"
          }
        },
        "type": "object",
        "required": [
          "response",
          "accepted",
          "phase"
        ],
        "title": "GenerateResponse",
        "description": "Response model for generate endpoint.\n\nCONTRACT: Core fields (always present, part of stable API contract):\n- response: Generated text\n- accepted: Whether the request was morally accepted\n- phase: Current cognitive phase\n- moral_score: Moral score used for this request\n- aphasia_flags: Aphasia detection flags (if available)\n- emergency_shutdown: Whether system is in emergency shutdown state\n- cognitive_state: Aggregated cognitive state snapshot\n\nOptional metrics/diagnostics:\n- metrics: Performance and timing information\n- safety_flags: Safety-related validation results\n- memory_stats: Memory state statistics"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HealthStatus": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status"
          },
          "timestamp": {
            "type": "number",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "required": [
          "status",
          "timestamp"
        ],
        "title": "HealthStatus",
        "description": "Basic health status response."
      },
      "InferRequest": {
        "properties": {
          "prompt": {
            "type": "string",
            "minLength": 1,
            "title": "Prompt",
            "description": "Input text prompt to process"
          },
          "moral_value": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Moral Value",
            "description": "Moral threshold value (default: 0.5)"
          },
          "max_tokens": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 4096.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Tokens",
            "description": "Maximum number of tokens to generate"
          },
          "secure_mode": {
            "type": "boolean",
            "title": "Secure Mode",
            "description": "Enable enhanced security filtering for sensitive contexts",
            "default": false
          },
          "aphasia_mode": {
            "type": "boolean",
            "title": "Aphasia Mode",
            "description": "Enable aphasia detection and repair for output quality",
            "default": false
          },
          "rag_enabled": {
            "type": "boolean",
            "title": "Rag Enabled",
            "description": "Enable RAG-based context retrieval from memory",
            "default": true
          },
          "context_top_k": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 100.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Context Top K",
            "description": "Number of context items for RAG (default: 5)"
          },
          "user_intent": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Intent",
            "description": "User intent category (e.g., 'conversational', 'analytical')"
          }
        },
        "type": "object",
        "required": [
          "prompt"
        ],
        "title": "InferRequest",
        "description": "Request model for infer endpoint with extended governance options."
      },
      "InferResponse": {
        "properties": {
          "response": {
            "type": "string",
            "title": "Response",
            "description": "Generated response text"
          },
          "accepted": {
            "type": "boolean",
            "title": "Accepted",
            "description": "Whether the request was accepted"
          },
          "phase": {
            "type": "string",
            "title": "Phase",
            "description": "Current cognitive phase ('wake' or 'sleep')"
          },
          "moral_metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Moral Metadata",
            "description": "Moral filtering metadata"
          },
          "aphasia_metadata": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AphasiaMetadata"
              },
              {
                "type": "null"
              }
            ],
            "description": "Aphasia detection/repair metadata (if aphasia_mode enabled)"
          },
          "rag_metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rag Metadata",
            "description": "RAG retrieval metadata (context items, relevance)"
          },
          "timing": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "number"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Timing",
            "description": "Performance timing in milliseconds"
          },
          "governance": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Governance",
            "description": "Full governance state information"
          }
        },
        "type": "object",
        "required": [
          "response",
          "accepted",
          "phase"
        ],
        "title": "InferResponse",
        "description": "Response model for infer endpoint with detailed metadata."
      },
      "LivenessStatus": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Always 'alive' if process is responsive"
          },
          "timestamp": {
            "type": "number",
            "title": "Timestamp",
            "description": "Unix timestamp of response"
          }
        },
        "type": "object",
        "required": [
          "status",
          "timestamp"
        ],
        "title": "LivenessStatus",
        "description": "Liveness status response - just confirms process is running."
      },
      "ReadinessStatus": {
        "properties": {
          "ready": {
            "type": "boolean",
            "title": "Ready",
            "description": "Overall readiness status"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Status string: 'ready' or 'not_ready'"
          },
          "timestamp": {
            "type": "number",
            "title": "Timestamp",
            "description": "Unix timestamp of response"
          },
          "components": {
            "additionalProperties": {
              "$ref": "#/components/schemas/ComponentStatus"
            },
            "type": "object",
            "title": "Components",
            "description": "Per-component health status"
          },
          "details": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Details",
            "description": "Additional details for debugging"
          },
          "checks": {
            "additionalProperties": {
              "type": "boolean"
            },
            "type": "object",
            "title": "Checks",
            "description": "Legacy check results (deprecated, use components)"
          }
        },
        "type": "object",
        "required": [
          "ready",
          "status",
          "timestamp",
          "components",
          "checks"
        ],
        "title": "ReadinessStatus",
        "description": "Readiness status response with aggregated component health."
      },
      "SimpleHealthStatus": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status"
          }
        },
        "type": "object",
        "required": [
          "status"
        ],
        "title": "SimpleHealthStatus",
        "description": "Simple health status response for basic health check."
      },
      "StateResponse": {
        "properties": {
          "L1_norm": {
            "type": "number",
            "title": "L1 Norm"
          },
          "L2_norm": {
            "type": "number",
            "title": "L2 Norm"
          },
          "L3_norm": {
            "type": "number",
            "title": "L3 Norm"
          },
          "current_phase": {
            "type": "string",
            "title": "Current Phase"
          },
          "latent_events_count": {
            "type": "integer",
            "title": "Latent Events Count"
          },
          "accepted_events_count": {
            "type": "integer",
            "title": "Accepted Events Count"
          },
          "total_events_processed": {
            "type": "integer",
            "title": "Total Events Processed"
          },
          "moral_filter_threshold": {
            "type": "number",
            "title": "Moral Filter Threshold"
          }
        },
        "type": "object",
        "required": [
          "L1_norm",
          "L2_norm",
          "L3_norm",
          "current_phase",
          "latent_events_count",
          "accepted_events_count",
          "total_events_processed",
          "moral_filter_threshold"
        ],
        "title": "StateResponse"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    },
    "securitySchemes": {
      "OAuth2PasswordBearer": {
        "type": "oauth2",
        "flows": {
          "password": {
            "scopes": {},
            "tokenUrl": "token"
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Generation",
      "description": "Text generation with cognitive governance"
    },
    {
      "name": "Events",
      "description": "Event processing and state management"
    },
    {
      "name": "Health",
      "description": "Health check endpoints"
    }
  ],
  "servers": [
    {
      "url": "http://localhost:8000",
      "description": "Local development server"
    },
    {
      "url": "https://api.mlsdm.example.com",
      "description": "Production server"
    }
  ]
}