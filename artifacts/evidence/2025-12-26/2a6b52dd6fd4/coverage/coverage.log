=== STDOUT ===
========================================================================
MLSDM Coverage Gate
========================================================================

Configuration:
  COVERAGE_MIN: 75%
  PYTEST_ARGS:  <none>

Working directory: /home/runner/work/mlsdm/mlsdm

========================================================================
Running tests with coverage...
========================================================================

........................................................................ [  3%]
........................................................................ [  7%]
........................................................................ [ 10%]
........................................................................ [ 14%]
........................................................................ [ 17%]
........................................................................ [ 21%]
........................................................................ [ 24%]
........................................................................ [ 28%]
........................................................................ [ 31%]
........................................................................ [ 35%]
........................................................................ [ 38%]
....................................sssss.sssss......................... [ 42%]
........................................................................ [ 45%]
........................................................................ [ 49%]
........................................................................ [ 52%]
.............F.......................................................... [ 56%]
........................................................................ [ 60%]
........................................................................ [ 63%]
........................................................................ [ 67%]
........................................................................ [ 70%]
........................................................................ [ 74%]
........................................................................ [ 77%]
........................................................................ [ 81%]
..............ss........................................................ [ 84%]
........................................................................ [ 88%]
........................................................................ [ 91%]
........................................................................ [ 95%]
........................................................................ [ 98%]
......................                                                   [100%]
=================================== FAILURES ===================================
______ TestMetricsEvidencePaths.test_evidence_snapshot_has_required_files ______
tests/unit/test_metrics_evidence_paths.py:126: in test_evidence_snapshot_has_required_files
    assert not missing, (
E   AssertionError: Evidence snapshot 2a6b52dd6fd4 is missing required files: ['manifest.json', 'coverage/coverage.xml', 'pytest/junit.xml', 'benchmarks/benchmark-metrics.json', 'memory/memory_footprint.json']. Run 'make evidence' to regenerate.
E   assert not ['manifest.json', 'coverage/coverage.xml', 'pytest/junit.xml', 'benchmarks/benchmark-metrics.json', 'memory/memory_footprint.json']
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                 Stmts   Miss Branch BrPart   Cover   Missing
-------------------------------------------------------------------------------------------------
src/mlsdm/__init__.py                                   32     13     14      2  45.65%   110->113, 113->116, 153-163, 195-203
src/mlsdm/adapters/__init__.py                           6      0      0      0 100.00%
src/mlsdm/adapters/anthropic_adapter.py                 23     19      4      0  14.81%   36-84
src/mlsdm/adapters/llm_provider.py                     106     53     12      2  50.00%   112, 146, 164-208, 217, 241-251, 269-313, 322, 366
src/mlsdm/adapters/local_stub_adapter.py                13      1      4      1  88.24%   64
src/mlsdm/adapters/openai_adapter.py                    22     18      4      0  15.38%   36-83
src/mlsdm/adapters/provider_factory.py                  42      1     16      1  96.55%   107
src/mlsdm/api/app.py                                   329    189     68      2  36.27%   20, 69-72, 100-106, 130-171, 211-213, 225-231, 236-255, 416-442, 448-457, 500-658, 701-876, 895-897
src/mlsdm/api/health.py                                295    104     58     14  60.34%   59, 159, 178, 200, 231, 247-257, 270-282, 294-303, 312-314, 343-374, 394-400, 413-416, 441, 448, 455, 480-486, 493-500, 507-511, 541, 595-597, 603-605, 610-612, 644->658, 650-653, 659, 661
src/mlsdm/api/lifecycle.py                              57     41     10      0  23.88%   26-28, 36, 45-56, 65-69, 81-100, 108, 122-124, 133-142, 147-150
src/mlsdm/api/middleware.py                            193     66     26      1  61.19%   224, 237-239, 252-262, 321-333, 375-392, 415-423, 459-461, 469-496, 519-568, 586-600, 612
src/mlsdm/api/schemas.py                                34     34      0      0   0.00%   16-162
src/mlsdm/cli/__init__.py                              288    104     82      9  62.97%   21-72, 79-81, 133, 148, 169->164, 227-228, 260-263, 312, 326-328, 339-412, 562, 566, 570
src/mlsdm/cli/__main__.py                                2      2      0      0   0.00%   3-5
src/mlsdm/cli/main.py                                   24     24      0      0   0.00%   1-37
src/mlsdm/cognition/__init__.py                          6      0      0      0 100.00%
src/mlsdm/cognition/moral_filter.py                     20      0      8      0 100.00%
src/mlsdm/cognition/moral_filter_v2.py                 101     15     38      4  83.45%   93, 118, 163-168, 262, 272, 316-317, 319-322
src/mlsdm/cognition/ontology_matcher.py                 33      0     14      0 100.00%
src/mlsdm/cognition/role_boundary_controller.py        175      6     46      6  94.57%   201, 210, 216, 225, 233, 713
src/mlsdm/cognition/synergy_experience.py              181      6     54      2  94.89%   43-47, 406, 413->419
src/mlsdm/config/__init__.py                             2      0      0      0 100.00%
src/mlsdm/config/architecture_manifest.py               45     45     22      0   0.00%   14-214
src/mlsdm/config/calibration.py                        114      3      4      0  97.46%   451, 461-462
src/mlsdm/config/perf_slo.py                            39     39      0      0   0.00%   11-130
src/mlsdm/config/runtime.py                            161    161     18      0   0.00%   25-411
src/mlsdm/contracts/__init__.py                          4      0      0      0 100.00%
src/mlsdm/contracts/engine_models.py                    63     16      0      0  74.60%   90-91, 203, 246, 331, 340, 356-381, 402
src/mlsdm/contracts/errors.py                           22      7      2      0  62.50%   91-94, 112, 126, 145
src/mlsdm/contracts/speech_models.py                    84     39     16      0  45.00%   82, 152, 161, 218-219, 224-238, 259-300, 366, 386-394
src/mlsdm/core/__init__.py                               2      0      0      0 100.00%
src/mlsdm/core/cognitive_controller.py                 218     31     32      5  85.60%   106->108, 150, 184, 194, 204, 302-305, 329-341, 350-352, 414-415, 436-437, 500-502, 511-516
src/mlsdm/core/cognitive_state.py                       17      1      0      0  94.12%   70
src/mlsdm/core/llm_pipeline.py                         222      6     36      2  96.90%   166, 185, 254, 452-453, 742, 800->803
src/mlsdm/core/llm_wrapper.py                          385     42    108     14  86.61%   135->137, 344, 405, 432-434, 442-448, 578, 588, 628-630, 641, 660-666, 706-707, 720-723, 746, 757-775, 875, 883->890, 887, 931-932, 971-977
src/mlsdm/core/memory_manager.py                       195     11     76      4  94.46%   274, 313-316, 383, 390, 404, 468-475
src/mlsdm/deploy/__init__.py                             2      0      0      0 100.00%
src/mlsdm/deploy/canary_manager.py                     108      0     40      0 100.00%
src/mlsdm/engine/__init__.py                             3      0      0      0 100.00%
src/mlsdm/engine/factory.py                             64     11     22      5  79.07%   72->75, 129, 153->157, 159-160, 169-189
src/mlsdm/engine/neuro_cognitive_engine.py             397     80    112     20  74.85%   99->exit, 245-249, 257-263, 315->330, 357-374, 519-521, 553-555, 587-589, 689->exit, 694-695, 727-735, 753, 790-812, 878, 889->911, 898, 902->904, 905-909, 989-1002, 1069-1077, 1103->1107, 1105->1107, 1107->1113, 1113->exit, 1159-1176, 1203, 1214-1219
src/mlsdm/extensions/__init__.py                         2      0      0      0 100.00%
src/mlsdm/extensions/neuro_lang_extension.py           374    184    118     23  48.17%   95-138, 166->349, 170-174, 177, 180-182, 186-190, 193-195, 198, 202-210, 213-220, 224-228, 231-235, 238-254, 258-265, 268-300, 304-307, 310-332, 336-337, 340-345, 367->369, 369->371, 371->374, 410, 421, 440, 538, 577-579, 588, 597, 650-689, 700-704, 716-717, 722, 736-737, 761->770, 762->761, 767, 770->799, 774->781, 775->774, 779
src/mlsdm/memory/__init__.py                             4      0      0      0 100.00%
src/mlsdm/memory/multi_level_memory.py                 104      1     26      2  97.69%   38, 158->exit
src/mlsdm/memory/phase_entangled_lattice_memory.py     301     18    132     23  90.53%   133->140, 141, 189->201, 214, 268->281, 324, 418->436, 424, 439->exit, 451->exit, 486->497, 498, 504, 512, 531->542, 543, 558-560, 579-582, 598->610, 611, 700, 721, 743, 752-753
src/mlsdm/memory/provenance.py                          25      0      2      0 100.00%
src/mlsdm/memory/qilm_module.py                         27      0     14      0 100.00%
src/mlsdm/memory/qilm_v2.py                              3      0      0      0 100.00%
src/mlsdm/observability/__init__.py                     10      0      0      0 100.00%
src/mlsdm/observability/aphasia_logging.py              28      1      6      2  91.18%   83->exit, 86
src/mlsdm/observability/aphasia_metrics.py              26      2      6      1  90.62%   124->127, 137-138
src/mlsdm/observability/exporters.py                    54      0     14      0 100.00%
src/mlsdm/observability/logger.py                      322    117    130      9  53.98%   27-29, 55-68, 267, 269, 356->360, 565->568, 767->769, 769->772, 791->794, 830-860, 896-910, 928, 960-970, 1012-1029, 1060-1072, 1103-1116, 1149-1162, 1217-1231, 1256, 1280, 1308-1316, 1344-1352, 1378, 1429->1432
src/mlsdm/observability/memory_telemetry.py            223     47     38      8  75.86%   51, 323->326, 332-333, 377->380, 386-388, 426->429, 436-437, 471-472, 514-515, 550->553, 565-566, 590-601, 622-634, 651-661, 699->703, 711-713, 741->744, 753-754, 790->793, 802-803, 823->827, 828-829, 850-851, 855-856, 860, 869-871
src/mlsdm/observability/metrics.py                     419    127     52      9  67.30%   631-632, 641-642, 659-660, 670-671, 679-680, 766-767, 778-779, 787-788, 796-797, 805-806, 810-811, 815-816, 826-827, 835-836, 848-849, 857-858, 866-867, 875-876, 901, 966-967, 978-979, 983-984, 988-989, 1002-1003, 1012-1013, 1022-1023, 1035-1036, 1045-1046, 1055-1056, 1079-1080, 1088-1089, 1102-1103, 1112-1113, 1129-1136, 1157-1158, 1170-1171, 1182-1183, 1192-1193, 1201-1202, 1210-1211, 1219-1220, 1233-1234, 1243-1244, 1253-1254, 1262-1263, 1272-1273, 1347->1350, 1389-1407, 1433-1447, 1503, 1509, 1566-1568, 1572-1574, 1660, 1667, 1670
src/mlsdm/observability/policy_drift_telemetry.py       20      1      8      1  92.86%   84
src/mlsdm/observability/tracing.py                     304    111     88     15  58.16%   40-45, 92, 98-100, 105-107, 129, 133, 137, 141, 184, 238, 260-261, 317->319, 336, 344-392, 400-433, 438-445, 457-466, 471, 498->501, 519-521, 598-609, 654, 661, 703-706, 713, 795-796, 821->824, 846-847, 871-879, 899-900, 928-929, 981-982, 1008-1016, 1036-1037, 1064-1065
src/mlsdm/rhythm/cognitive_rhythm.py                    32      3      6      1  89.47%   17, 49, 64
src/mlsdm/router/__init__.py                             2      0      0      0 100.00%
src/mlsdm/router/llm_router.py                          93      0     50      0 100.00%
src/mlsdm/sdk/__init__.py                                2      0      0      0 100.00%
src/mlsdm/sdk/neuro_engine_client.py                   107      0     30      1  99.27%   401->408
src/mlsdm/security/__init__.py                           5      0      0      0 100.00%
src/mlsdm/security/guardrails.py                       150      4     22      4  95.35%   337, 406, 612->620, 621->620, 627-629
src/mlsdm/security/llm_safety.py                       187      8     78      8  93.21%   379, 446, 615, 683->696, 691->696, 705->710, 715-718, 751, 794, 829->835
src/mlsdm/security/mtls.py                             108      0     32      1  99.29%   298->301
src/mlsdm/security/oidc.py                             192     42     50      5  73.97%   326-372, 441-461, 487-489, 490->493, 500-518
src/mlsdm/security/payload_scrubber.py                  90     24     24      0  78.95%   226-228, 234-235, 238-240, 301-303, 306-308, 336-342, 371-377, 416-417
src/mlsdm/security/policy_engine.py                    123      7     30      4  92.81%   194-195, 370-373, 396, 425
src/mlsdm/security/rate_limit.py                        63     11     18      2  76.54%   80-81, 146-160, 184->190
src/mlsdm/security/rbac.py                             193     24     64     11  84.05%   198->exit, 203-207, 218-225, 347->349, 421, 427, 469, 560-562, 563->566, 567, 575->582, 591, 615-621
src/mlsdm/security/signing.py                          118      0     34      1  99.34%   366->370
src/mlsdm/speech/__init__.py                             2      0      0      0 100.00%
src/mlsdm/speech/governance.py                          30      5      2      0  84.38%   64, 106-121
src/mlsdm/state/__init__.py                              3      0      0      0 100.00%
src/mlsdm/state/system_state_migrations.py              62      8     28      5  85.56%   45, 104-105, 134, 139, 146, 151-152
src/mlsdm/state/system_state_schema.py                  83      8     34      7  85.47%   64, 68, 163, 192, 201, 205, 210-211
src/mlsdm/state/system_state_store.py                  191     45     68     15  72.20%   83, 85, 87, 114-117, 154, 165-166, 180-194, 198-199, 251-264, 270->279, 273-276, 284, 308->313, 314->317, 319->exit, 367-377, 385-388, 400-401
src/mlsdm/utils/__init__.py                              9      0      0      0 100.00%
src/mlsdm/utils/array_pool.py                           99      1     22      3  96.69%   168, 236->238, 244->exit
src/mlsdm/utils/bulkhead.py                            127      3     26      3  96.08%   283, 359, 379
src/mlsdm/utils/cache.py                               227      4     40      3  97.38%   162, 213->219, 411-413
src/mlsdm/utils/circuit_breaker.py                     233      1     56      4  98.27%   296, 327->331, 411->exit, 640->643
src/mlsdm/utils/coherence_safety_metrics.py            170      0     58      1  99.56%   141->127
src/mlsdm/utils/config_loader.py                       204     15     58      3  93.13%   100-106, 131-134, 190->192, 287-288, 313-314, 338
src/mlsdm/utils/config_schema.py                       172      4     44      9  93.98%   114->120, 118, 181->193, 214->217, 216, 241, 370, 460->470, 462->470
src/mlsdm/utils/config_validator.py                    117      1     50      1  98.80%   255
src/mlsdm/utils/data_serializer.py                      51      5     22      3  86.30%   16-18, 32, 35
src/mlsdm/utils/embedding_cache.py                     110      3     24      4  94.78%   124, 140-141, 291->293, 299->exit
src/mlsdm/utils/errors.py                              246     12     78     21  89.81%   248, 272, 384->386, 386->388, 415->420, 444->449, 476, 509->520, 545->547, 561->563, 626->628, 629, 637->639, 640, 693, 697, 699, 705, 708, 711, 724
src/mlsdm/utils/input_validator.py                     167     34     94      2  79.31%   57, 114, 150-151, 416-475
src/mlsdm/utils/math_constants.py                      103      3     50     11  90.85%   115->exit, 123->exit, 202, 222->exit, 230->exit, 298->exit, 305->exit, 337->exit, 344->exit, 370, 422
src/mlsdm/utils/metrics.py                              50      1      6      1  96.43%   62
src/mlsdm/utils/rate_limiter.py                         54      8     18      3  81.94%   65, 86->exit, 110-118, 147
src/mlsdm/utils/security_logger.py                      88      7      8      0  92.71%   315, 346, 368, 394, 428, 455, 479
src/mlsdm/utils/time_provider.py                        35      2      2      0  94.59%   36, 40
-------------------------------------------------------------------------------------------------
TOTAL                                                10473   2090   2806    324  77.87%

2 empty files skipped.
Coverage XML written to file coverage.xml
=========================== short test summary info ============================
FAILED tests/unit/test_metrics_evidence_paths.py::TestMetricsEvidencePaths::test_evidence_snapshot_has_required_files - AssertionError: Evidence snapshot 2a6b52dd6fd4 is missing required files: ['manifest.json', 'coverage/coverage.xml', 'pytest/junit.xml', 'benchmarks/benchmark-metrics.json', 'memory/memory_footprint.json']. Run 'make evidence' to regenerate.
assert not ['manifest.json', 'coverage/coverage.xml', 'pytest/junit.xml', 'benchmarks/benchmark-metrics.json', 'memory/memory_footprint.json']
1 failed, 2025 passed, 12 skipped, 6 deselected in 39.42s

========================================================================
Extracting coverage percentage...
========================================================================

Coverage: 77.87%
Threshold: 75%

========================================================================
âœ“ COVERAGE GATE PASSED
========================================================================

Coverage 77.87% meets minimum threshold of 75%

=== STDERR ===

=== EXIT CODE: 0 ===
